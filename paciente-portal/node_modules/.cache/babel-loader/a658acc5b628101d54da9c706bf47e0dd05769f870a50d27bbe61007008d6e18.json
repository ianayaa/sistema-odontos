{"ast":null,"code":"import{useState}from'react';import{login as loginApi,register as registerApi,setToken,logout as logoutApi}from'../services/auth';export function useAuth(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);async function login(email,password){setLoading(true);setError(null);try{const data=await loginApi(email,password);setToken(data.token);setUser(data.user);setLoading(false);return true;}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Error al iniciar sesión');setLoading(false);return false;}}async function register(name,email,password){setLoading(true);setError(null);try{await registerApi(name,email,password);setLoading(false);return true;}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Error al registrar');setLoading(false);return false;}}function logout(){logoutApi();setUser(null);}return{user,loading,error,login,register,logout};}","map":{"version":3,"names":["useState","login","loginApi","register","registerApi","setToken","logout","logoutApi","useAuth","user","setUser","loading","setLoading","error","setError","email","password","data","token","err","_err$response","_err$response$data","response","name","_err$response2","_err$response2$data"],"sources":["/Users/jorgeivananaya/Desktop/sistema odontos/paciente-portal/src/hooks/useAuth.ts"],"sourcesContent":["import { useState } from 'react';\nimport { login as loginApi, register as registerApi, setToken, logout as logoutApi } from '../services/auth';\n\nexport function useAuth() {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function login(email: string, password: string) {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await loginApi(email, password);\n      setToken(data.token);\n      setUser(data.user);\n      setLoading(false);\n      return true;\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Error al iniciar sesión');\n      setLoading(false);\n      return false;\n    }\n  }\n\n  async function register(name: string, email: string, password: string) {\n    setLoading(true);\n    setError(null);\n    try {\n      await registerApi(name, email, password);\n      setLoading(false);\n      return true;\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Error al registrar');\n      setLoading(false);\n      return false;\n    }\n  }\n\n  function logout() {\n    logoutApi();\n    setUser(null);\n  }\n\n  return { user, loading, error, login, register, logout };\n}\n"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,KAAK,GAAI,CAAAC,QAAQ,CAAEC,QAAQ,GAAI,CAAAC,WAAW,CAAEC,QAAQ,CAAEC,MAAM,GAAI,CAAAC,SAAS,KAAQ,kBAAkB,CAE5G,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAM,IAAI,CAAC,CAC3C,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAgB,IAAI,CAAC,CAEvD,cAAe,CAAAC,KAAKA,CAACc,KAAa,CAAEC,QAAgB,CAAE,CACpDJ,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACF,KAAM,CAAAG,IAAI,CAAG,KAAM,CAAAf,QAAQ,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAC5CX,QAAQ,CAACY,IAAI,CAACC,KAAK,CAAC,CACpBR,OAAO,CAACO,IAAI,CAACR,IAAI,CAAC,CAClBG,UAAU,CAAC,KAAK,CAAC,CACjB,MAAO,KAAI,CACb,CAAE,MAAOO,GAAQ,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACjBP,QAAQ,CAAC,EAAAM,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcH,IAAI,UAAAI,kBAAA,iBAAlBA,kBAAA,CAAoBR,KAAK,GAAI,yBAAyB,CAAC,CAChED,UAAU,CAAC,KAAK,CAAC,CACjB,MAAO,MAAK,CACd,CACF,CAEA,cAAe,CAAAT,QAAQA,CAACoB,IAAY,CAAER,KAAa,CAAEC,QAAgB,CAAE,CACrEJ,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACF,KAAM,CAAAV,WAAW,CAACmB,IAAI,CAAER,KAAK,CAAEC,QAAQ,CAAC,CACxCJ,UAAU,CAAC,KAAK,CAAC,CACjB,MAAO,KAAI,CACb,CAAE,MAAOO,GAAQ,CAAE,KAAAK,cAAA,CAAAC,mBAAA,CACjBX,QAAQ,CAAC,EAAAU,cAAA,CAAAL,GAAG,CAACG,QAAQ,UAAAE,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcP,IAAI,UAAAQ,mBAAA,iBAAlBA,mBAAA,CAAoBZ,KAAK,GAAI,oBAAoB,CAAC,CAC3DD,UAAU,CAAC,KAAK,CAAC,CACjB,MAAO,MAAK,CACd,CACF,CAEA,QAAS,CAAAN,MAAMA,CAAA,CAAG,CAChBC,SAAS,CAAC,CAAC,CACXG,OAAO,CAAC,IAAI,CAAC,CACf,CAEA,MAAO,CAAED,IAAI,CAAEE,OAAO,CAAEE,KAAK,CAAEZ,KAAK,CAAEE,QAAQ,CAAEG,MAAO,CAAC,CAC1D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}