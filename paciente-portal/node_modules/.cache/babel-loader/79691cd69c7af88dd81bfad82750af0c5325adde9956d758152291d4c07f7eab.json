{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { login as loginApi, register as registerApi, setToken, logout as logoutApi } from '../services/auth';\nexport function useAuth() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  async function login(email, password) {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await loginApi(email, password);\n      setToken(data.token);\n      setUser(data.user);\n      setLoading(false);\n      return true;\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Error al iniciar sesión');\n      setLoading(false);\n      return false;\n    }\n  }\n  async function register(name, email, password) {\n    setLoading(true);\n    setError(null);\n    try {\n      await registerApi(name, email, password);\n      setLoading(false);\n      return true;\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Error al registrar');\n      setLoading(false);\n      return false;\n    }\n  }\n  function logout() {\n    logoutApi();\n    setUser(null);\n  }\n  return {\n    user,\n    loading,\n    error,\n    login,\n    register,\n    logout\n  };\n}\n_s(useAuth, \"wJbgydKmzProwqZ2PuaEI7aaFyo=\");","map":{"version":3,"names":["useState","login","loginApi","register","registerApi","setToken","logout","logoutApi","useAuth","_s","user","setUser","loading","setLoading","error","setError","email","password","data","token","err","_err$response","_err$response$data","response","name","_err$response2","_err$response2$data"],"sources":["/Users/jorgeivananaya/Desktop/sistema odontos/paciente-portal/src/hooks/useAuth.ts"],"sourcesContent":["import { useState } from 'react';\nimport { login as loginApi, register as registerApi, setToken, logout as logoutApi } from '../services/auth';\n\nexport function useAuth() {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function login(email: string, password: string) {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await loginApi(email, password);\n      setToken(data.token);\n      setUser(data.user);\n      setLoading(false);\n      return true;\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Error al iniciar sesión');\n      setLoading(false);\n      return false;\n    }\n  }\n\n  async function register(name: string, email: string, password: string) {\n    setLoading(true);\n    setError(null);\n    try {\n      await registerApi(name, email, password);\n      setLoading(false);\n      return true;\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Error al registrar');\n      setLoading(false);\n      return false;\n    }\n  }\n\n  function logout() {\n    logoutApi();\n    setUser(null);\n  }\n\n  return { user, loading, error, login, register, logout };\n}\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,KAAK,IAAIC,QAAQ,EAAEC,QAAQ,IAAIC,WAAW,EAAEC,QAAQ,EAAEC,MAAM,IAAIC,SAAS,QAAQ,kBAAkB;AAE5G,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAM,IAAI,CAAC;EAC3C,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAgB,IAAI,CAAC;EAEvD,eAAeC,KAAKA,CAACe,KAAa,EAAEC,QAAgB,EAAE;IACpDJ,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACF,MAAMG,IAAI,GAAG,MAAMhB,QAAQ,CAACc,KAAK,EAAEC,QAAQ,CAAC;MAC5CZ,QAAQ,CAACa,IAAI,CAACC,KAAK,CAAC;MACpBR,OAAO,CAACO,IAAI,CAACR,IAAI,CAAC;MAClBG,UAAU,CAAC,KAAK,CAAC;MACjB,OAAO,IAAI;IACb,CAAC,CAAC,OAAOO,GAAQ,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACjBP,QAAQ,CAAC,EAAAM,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcH,IAAI,cAAAI,kBAAA,uBAAlBA,kBAAA,CAAoBR,KAAK,KAAI,yBAAyB,CAAC;MAChED,UAAU,CAAC,KAAK,CAAC;MACjB,OAAO,KAAK;IACd;EACF;EAEA,eAAeV,QAAQA,CAACqB,IAAY,EAAER,KAAa,EAAEC,QAAgB,EAAE;IACrEJ,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACF,MAAMX,WAAW,CAACoB,IAAI,EAAER,KAAK,EAAEC,QAAQ,CAAC;MACxCJ,UAAU,CAAC,KAAK,CAAC;MACjB,OAAO,IAAI;IACb,CAAC,CAAC,OAAOO,GAAQ,EAAE;MAAA,IAAAK,cAAA,EAAAC,mBAAA;MACjBX,QAAQ,CAAC,EAAAU,cAAA,GAAAL,GAAG,CAACG,QAAQ,cAAAE,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcP,IAAI,cAAAQ,mBAAA,uBAAlBA,mBAAA,CAAoBZ,KAAK,KAAI,oBAAoB,CAAC;MAC3DD,UAAU,CAAC,KAAK,CAAC;MACjB,OAAO,KAAK;IACd;EACF;EAEA,SAASP,MAAMA,CAAA,EAAG;IAChBC,SAAS,CAAC,CAAC;IACXI,OAAO,CAAC,IAAI,CAAC;EACf;EAEA,OAAO;IAAED,IAAI;IAAEE,OAAO;IAAEE,KAAK;IAAEb,KAAK;IAAEE,QAAQ;IAAEG;EAAO,CAAC;AAC1D;AAACG,EAAA,CAzCeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}